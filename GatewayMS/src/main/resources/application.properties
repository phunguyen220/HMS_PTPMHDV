spring.application.name=GatewayMS
server.port=9000

spring.cloud.gateway.server.webflux.default-filters[0]=DedupeResponseHeader=Access-Control-Allow-Origin Access-Control-Allow-Credentials

# CORS config
spring.cloud.gateway.server.webflux.globalcors.cors-configurations.[/**].allowedOrigins=${ALLOWED_ORIGINS:http://localhost:3000}
spring.cloud.gateway.server.webflux.globalcors.cors-configurations.[/**].allowedMethods=GET,POST,PUT,DELETE
spring.cloud.gateway.server.webflux.globalcors.cors-configurations.[/**].allowedHeaders=*

spring.cloud.gateway.server.webflux.globalcors.cors-configurations.[/**].allowCredentials=true
# UserMS route
spring.cloud.gateway.server.webflux.routes[0].id=UserMS
#spring.cloud.gateway.server.webflux.routes[0].uri=http://localhost:8080
spring.cloud.gateway.server.webflux.routes[0].uri=${USERMS_URL:lb://UserMS}
#spring.cloud.gateway.server.webflux.routes[0].uri=lb://UserMS
spring.cloud.gateway.server.webflux.routes[0].predicates[0]=Path=/user/**
spring.cloud.gateway.server.webflux.routes[0].filters[0]=TokenFilter

# UserMS route
spring.cloud.gateway.server.webflux.routes[1].id=ProfileMS
#spring.cloud.gateway.server.webflux.routes[1].uri=http://localhost:9100
spring.cloud.gateway.server.webflux.routes[1].uri=${PROFILEMS_URL:lb://ProfileMS}
#spring.cloud.gateway.server.webflux.routes[1].uri=lb://ProfileMS

spring.cloud.gateway.server.webflux.routes[1].predicates[0]=Path=/profile/**
spring.cloud.gateway.server.webflux.routes[1].filters[0]=TokenFilter

# AppointmentMS route
spring.cloud.gateway.server.webflux.routes[2].id=AppointmentMS
#spring.cloud.gateway.server.webflux.routes[2].uri=http://localhost:9200
spring.cloud.gateway.server.webflux.routes[2].uri=${APPOINTMENTMS_URL:lb://AppointmentMS}
#spring.cloud.gateway.server.webflux.routes[2].uri=lb://AppointmentMS

spring.cloud.gateway.server.webflux.routes[2].predicates[0]=Path=/appointment/**
spring.cloud.gateway.server.webflux.routes[2].filters[0]=TokenFilter
# AppointmentMS route
spring.cloud.gateway.server.webflux.routes[3].id=PharmacyMS
#spring.cloud.gateway.server.webflux.routes[3].uri=http://localhost:9300
spring.cloud.gateway.server.webflux.routes[3].uri=${PHARMACYMS_URL:lb://PharmacyMS}
#spring.cloud.gateway.server.webflux.routes[3].uri=lb://PharmacyMS

spring.cloud.gateway.server.webflux.routes[3].predicates[0]=Path=/pharmacy/**
spring.cloud.gateway.server.webflux.routes[3].filters[0]=TokenFilter

# MediaMS route
spring.cloud.gateway.server.webflux.routes[4].id=media
#spring.cloud.gateway.server.webflux.routes[3].uri=http://localhost:9400
#spring.cloud.gateway.server.webflux.routes[4].uri=lb://media
spring.cloud.gateway.server.webflux.routes[4].uri=${MEDIAMS_URL:lb://media}

spring.cloud.gateway.server.webflux.routes[4].predicates[0]=Path=/media/**
spring.cloud.gateway.server.webflux.routes[4].filters[0]=TokenFilter

# PaymentMS route
spring.cloud.gateway.server.webflux.routes[5].id=PaymentMS
spring.cloud.gateway.server.webflux.routes[5].uri=${PAYMENTMS_URL:lb://PaymentMS}
spring.cloud.gateway.server.webflux.routes[5].predicates[0]=Path=/payment/**
spring.cloud.gateway.server.webflux.routes[5].filters[0]=TokenFilter

#
## ChatMS route
#spring.cloud.gateway.server.webflux.routes[5].id=ChatMS
##spring.cloud.gateway.server.webflux.routes[3].uri=http://localhost:9400
##spring.cloud.gateway.server.webflux.routes[4].uri=lb://media
#spring.cloud.gateway.server.webflux.routes[5].uri=${MEDIAMS_URL:lb://ChatMS}
#
#spring.cloud.gateway.server.webflux.routes[5].predicates[0]=Path=/api/v1/chat/**, /api/v1/messages/**
#spring.cloud.gateway.server.webflux.routes[5].filters[0]=TokenFilter
#
## WebSocket route
#spring.cloud.gateway.server.webflux.routes[6].id=chat-websocket
##spring.cloud.gateway.server.webflux.routes[3].uri=http://localhost:9400
##spring.cloud.gateway.server.webflux.routes[4].uri=lb://media
#spring.cloud.gateway.server.webflux.routes[6].uri=${MEDIAMS_URL:lb://ChatMS}
#
#spring.cloud.gateway.server.webflux.routes[6].predicates[0]=Path=/ws/**
#spring.cloud.gateway.server.webflux.routes[6].filters[0]=TokenFilter

eureka.client.register-with-eureka=true
eureka.client.service-url.defaultZone=${EUREKA_SERVER_URL:http://localhost:8761/eureka/}

eureka.instance.prefer-ip-address=true